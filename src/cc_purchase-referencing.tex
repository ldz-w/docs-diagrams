% Document Header
\documentclass[tikz,border=12pt,12pt]{standalone}
\hyphenpenalty=10000
\input{style/cc-flow1.tikz}
\input{vars/shortcuts.tex}

\usepackage{tikz}
\usetikzlibrary{shapes.multipart}
\usetikzlibrary{calc}

\begin{document}
\begin{tikzpicture} 

% Nodes
\node[name=int1,split3] (int1) {
    \nodepart [white] {one} 1 Initial Transaction \\ (Request)
    \nodepart {two} $<$transaction-type$>$:purchase
    \nodepart {three} $<$periodic-type$>$:recurring \\ $<$sequence-type$>$:first 
  };
\node[name=int2, split, right of=int1] (int2) {
    \nodepart [white] {one} 2 Initial Transaction \\ (Response)
    \nodepart {two} $<$transaction-id$>$:12345 
  };
\node[name=rect1, split4, right of=int2] (rect1) {
    \nodepart [white] {one} 3 Recurring Transaction \\ (Request)
    \nodepart {two} $<$transaction-type$>$: \\ referenced-purchase
    \nodepart {three} $<$parent-transaction-id$>$:12345
    \nodepart {four} $<$periodic-type$>$:recurring \\ $<$sequence-type$>$:recurring
  };
\node[name=rect2, split, right of=rect1] (rect2) {
    \nodepart [white] {one} 4 Recurring Transaction \\ (Response)
    \nodepart {two} $<$transaction-id$>$:67890
  };
\node[name=fint1, split4, right of=rect2] (fint1) {
    \nodepart [white] {one} 5 Final Transaction \\ (Request)
    \nodepart {two} $<$transaction-type$>$: \\ referenced-purchase
    \nodepart {three} $<$parent-transaction-id$>$:12345
    \nodepart {four} $<$periodic-type$>$:recurring \\ $<$sequence-type$>$:final
  };
\node[name=fint2, split, right of=fint1] (fint2) {
    \nodepart [white] {one} 6 Final Transaction \\ (Response)
    \nodepart {two} $<$transaction-id$>$:45678
  };

% Lines
\draw[solidarrow] (int1.east) -- (int2.west);
\draw[solidarrow] (int2.east) -- (rect1.west);
\draw[solidarrow] (rect1.east) -- (rect2.west);
\draw[solidarrow] (rect2.east) -- (fint1.west);
\draw[solidarrow] (fint1.east) -- (fint2.west);

% Document Footer
\end{tikzpicture}
\end{document}
